////  PromptTemplates.swift//  MemoirAI////  Created by user941803 on 5/9/25.//  Updated 5/15/25 to deepen detail across all art styles, especially Kid's Book, expanding Image Prompt requirements and adding granular layout and text rules.//import Foundation// Assumes ArtStyle enum is defined elsewhere:// enum ArtStyle: String, CaseIterable, Identifiable {//     case realistic = "Realistic"//     case cartoon = "Cartoon"//     case kidsBook = "Kid's Book"//     case custom = "Custom"//     var id: String { self.rawValue }// }enum PromptTemplates {    /// Combines a scene description and caption into a single prompt for DALL·E,    /// instructing it to render the verse directly onto the image.    static func combinedImagePrompt(sceneDescription: String, caption: String) -> String {        return """        \(sceneDescription)        Draw these exact words on the illustration in chunky serif lettering (choose white or black for maximum contrast):        \(caption)        """    }    /// Builds a detailed system prompt for the chosen art style, with exact visual, layout, and text instructions.    static func systemPrompt(for artStyle: ArtStyle, customArtStyleDetails: String?) -> String {        var visualStyleGuidance: String        var pageTextGuidance: String        switch artStyle {        case .realistic:            visualStyleGuidance = """            **Realistic**: Aim for photorealism or classical illustration.            1. **Lighting**: natural, high dynamic range; golden hour backlight or Rembrandt chiaroscuro.            2. **Textures**: hyper-detailed surfaces—skin pores, fabric weaves, weathering on wood.            3. **Depth**: atmospheric haze, realistic depth-of-field.            4. **Composition**: cinematic framing—wide establishing shot or intimate close-up.            5. **Color**: true-to-life palette; avoid flat shapes.            6. **Mood**: capture emotional gravity via subtle tonal shifts.            """            pageTextGuidance = """            Write 1–3 sentences of first-person reflective prose. Use evocative language—metaphor, sensory detail, and emotional resonance. Keep sentences flowing and literary.            """        case .cartoon:            visualStyleGuidance = """            **Cartoon**: Modern 2D animation style.            1. **Characters**: bold outlines, big expressive eyes, exaggerated limbs.            2. **Color**: flat, saturated fills; optional quirky accent colors.            3. **Background**: simple or stylized, minimal clutter.            4. **Energy**: dynamic poses, motion lines, playful composition.            5. **Detail**: avoid texture; focus on graphic clarity.            """            pageTextGuidance = """            Generate a one-sentence caption or onomatopoeia. Could be '[Thought]: Whoops!' or 'ZIP! Around we go.' Make it snappy and humorous.            """        case .kidsBook:            visualStyleGuidance = """            **Kid’s Book** (Eric Carle + Dr. Seuss fusion):            1. **Canvas**: single seamless 16:9 storybook illustration. No extra panels, frames, or swatches.            2. **Technique**: flat paper collage—visible torn edges, paper grain, streaky brush textures on tissue paper.            3. **Shapes**: bold, simple, irregular organic forms—friendly characters and objects.            4. **Color**: bright primaries/secondaries; flat fills without gradients.            5. **Layout**: central focus; leave natural flat-color areas (sky, ground) for text overlay.            6. **Composition**: rule-of-thirds or centered to accommodate verse without obstructing faces or action.            7. **Text Zone**: AI must render verse directly onto the illustration in chunky serif lettering; choose white or black based on contrast.            8. **Detail**: include tactile clues—paper shadows, hand-cut overlaps, visible glue lines.            """            pageTextGuidance = """            Generate 2–4 lines of rhyme in **strict anapestic trimeter** (da-da-DUM da-da-DUM da-da-DUM) using an **AABB** or **ABCB** scheme. For each line:            1. Appear on its own row with no numbering.            2. Begin with a vivid detail from the memory (e.g., 'Back in Nana’s garden…').            3. Incorporate at least one sensory image (touch, sound, smell).            4. Include a repeating refrain word every two pages for cohesion.            5. End with a gentle invitation or reflective question.            Text should be embedded *in situ*—AI draws the words in the art, not left blank.            """        case .custom:            let details = customArtStyleDetails?.trimmingCharacters(in: .whitespacesAndNewlines) ?? ""            if !details.isEmpty {                visualStyleGuidance = """                **Custom**: \(details).                Translate these specific instructions into a coherent visual style.                """                pageTextGuidance = """                Write 1–2 sentences of narrative that align with the custom style '\(details)'. Focus on tone and theme.                """            } else {                visualStyleGuidance = """                **Custom**: no details provided.                Infer a versatile illustrative style based on scene mood.                """                pageTextGuidance = """                Write 1–2 engaging sentences capturing the scene’s essence.                """            }        }        // Assemble the full system prompt        return """        You are an expert AI assistant at crafting vivid storybook prompts.        Process a memoir transcript and identify **N** emotional highlights. For each, provide:        1. Who & What: Show [CHARACTER DESCRIPTION] performing [PRIMARY ACTION], e.g. “John, a rugged farmer, kneels beside drooping corn stalks.”        2. Where & When: Set in [SETTING] at [TIME OF DAY], e.g. “a scorched farm field at high noon under a blistering sun.”        3. Composition: Use a [VIEWPOINT], e.g. “intimate close-up focusing on his calloused hands touching the dry earth.”        4. Color & Technique: In [CHOSEN STYLE], e.g.             – **Realistic**: “photorealistic watercolor with lifelike textures and natural light.”             – **Cartoon**: “bold outlines, flat primary fills, minimal shading, dynamic angles.”             – **Kid’s Book**: “flat paper collage look, torn edges visible, bright primaries, no gradients.”          5. Palette & Mood: Specify “warm dusty browns” or “vibrant reds and greens” to set the atmosphere.          6. Sensory Cue: Add “floating dust motes” or “soft paper grain texture” to enrich the scene.          7. Layout Zone: Reserve a clear band at the bottom (or sky) and **draw these exact words** there:             “The corn sighed dry beneath the sun’s fierce plea —              Still hope blooms green where hearts believe to be.”          8. Typography: “Words should be rendered in chunky serif type, white or black chosen for maximum contrast.”          9. Emotional Tone: “Convey resilience through intimate struggle” or “convey playful wonder.”          10. Interactive Detail: “Include a hidden motif—a small leaf in the corner—for kids to spot.”          2. **Page Text** (2–4 lines rhyme or prose):           \(pageTextGuidance)        **GLOBAL CONSTRAINTS:**        • Compose one continuous storybook illustration per scene—no design mockups or extra swatches.        • All text must appear *in situ* on the illustration.        • Strictly use these delimiters:        IMAGE_PROMPT_START        [Your multi-sentence image prompt]        IMAGE_PROMPT_END        PAGE_TEXT_START        [Your text lines]        PAGE_TEXT_END        ---SCENE_DIVIDER---        Output exactly N blocks. Omit the final divider after the last scene.        If unable to generate content, output only within PAGE_TEXT_START/END:        "I am unable to generate storybook content from the provided transcript with the current settings."        """    }    /// Builds the user message by injecting transcript and N.    static func userMessage(transcript: String, pageCount n: Int) -> String {        let wordCount = transcript.split(whereSeparator: { $0.isWhitespace }).count        return """        This is a **Flow A** scenario (single transcript).        Transcript length: \(wordCount) words.        Generate exactly N = \(n) page prompts (Image Prompt + Page Text).        Follow exactly:        • The 6–10 sentence structure for each Image Prompt.        • The rhyme/prose rules for Page Text.        • The exact delimiters: IMAGE_PROMPT_START, IMAGE_PROMPT_END, PAGE_TEXT_START, PAGE_TEXT_END, ---SCENE_DIVIDER---.        **Transcript Below:**        ```        \(transcript)        ```        """    }}